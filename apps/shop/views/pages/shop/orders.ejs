<!DOCTYPE html>
<html>

<head>
  <% include ../../includes/header.ejs %>
</head>

<body>
  <% include ../../includes/nav.ejs %>

    <div class="container mt-3">

      <% if(orders.length > 0) { %>

        <div class="list-group">
          <% for(order of orders) { %>
            <div class="list-group-item list-group-item-action bg-light">
              <h4 class="d-flex justify-content-between align-items-center mb-3">
                <span class="text-muted">Order Id: <%= order._id %></span>
                <span class="badge badge-secondary badge-pill"><%= order.products.length %> Items</span>
              </h4>
              <p class="mb-1">
                <ul class="list-group">
                  <% order.products.forEach(({quantity, product}) => { %>
                    <li class="list-group-item d-flex lh-condensed">
                      <img class="mx-3" height="50" width="50" src="<%= product.imageUrl %>" ></img>
                        <div>
                          <h6 class="my-0"><%= product.title %> (<%= quantity %>x)</h6>
                          <small class="text-muted"><%= product.description.substring(0,50); %>...</small>
                        </div>
                    </li>
                  <% }) %>
                </ul>
              </p>
              <small>Placed by: <%= order.user.email %></small>
            </div>
          <% } %>
        </div>

      <% } else { %>
        <div class="m-auto text-center text-muted">
          <p>No orders yet.</p>
        </div>
      <% } %>
    </div>
</body>

</html>